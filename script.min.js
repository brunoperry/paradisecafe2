function init(){landingPage=document.getElementById("landing-page"),canvas=document.getElementById("canvas"),context=canvas.getContext("2d"),context.font="24px Mono",context.fillStyle="#ffffff",canvasW=canvas.width,canvasH=canvas.height,audioSource=new AudioSource,door=new Door(appData.door),balloon=new Balloon(appData.balloons),keyboard=new Keyboard,hud=new HUD,sideMenu=new SideMenu,hero=new Hero(appData.characters[0]),police=new Police(appData.characters[1]),whore=new Whore(appData.characters[2]),oldLady=new OldLady(appData.characters[3]),thief=new Thief(appData.characters[4]),pimp=new Pimp(appData.characters[5]),waitress=new Waitress(appData.characters[6]),dealer=new Dealer(appData.characters[7]),scout=new Scout(appData.characters[8]),splashScene=new SplashScene(appData.scenes[0]),mainScene=new MainScene(appData.scenes[1]),streetScene=new StreetScene(appData.scenes[2]),jailScene=new JailScene(appData.scenes[3]),brothelScene=new BrothelScene(appData.scenes[4]),paradiseCafeScene=new ParadiseCafeScene(appData.scenes[5]),recordsScene=new RecordsScene(appData.scenes[6]),onResize()}function initGame(){document.getElementById("age-question").style.display="block",keyboard.show([appData.keys[2],appData.keys[3]],function(a){keyboard.hide(),"key-yes"===a?(landingPage.style.display="none",startGame()):window.open("https://www.youtube.com/watch?v=PyAZaMtvrDY","_self")})}function startGame(){changeScenes(DEBUG?streetScene.name:splashScene.name)}function gameLoop(){currentScene.isReady&&currentScene.update()}function clearCanvas(){context.clearRect(0,0,canvasW,canvasH)}function render(a){for(clearCanvas(),i=0;i<a.length;i++)context.drawImage(a[i],0,0,canvasW,canvasH);currentScene.showHUD&&hud.render()}function changeScenes(a){if(!currentScene||currentScene.name!==a){var b=currentScene;switch(balloon.clearBalloon(),a){case splashScene.name:currentScene=splashScene,sideMenu.disable();break;case mainScene.name:currentScene=mainScene,sideMenu.enable();break;case streetScene.name:currentScene=streetScene,sideMenu.enable();break;case jailScene.name:currentScene=jailScene,sideMenu.enable();break;case brothelScene.name:currentScene=brothelScene,sideMenu.enable();break;case paradiseCafeScene.name:currentScene=paradiseCafeScene,sideMenu.enable();break;case recordsScene.name:currentScene=recordsScene,sideMenu.enable()}b?b.doTransition?transition(b):(b.disable(),currentScene.enable()):currentScene.enable()}}function setSpeed(a){return SPEED!==a&&(SPEED=a),0===a?(clearInterval(interval),void(interval=null)):void(interval?(clearInterval(interval),interval=null,interval=setInterval(gameLoop,SPEED)):interval=setInterval(gameLoop,SPEED))}function wait(a){var b=SPEED;setSpeed(0),setTimeout(function(){setSpeed(b)},1e3*a)}function sceneReady(){numScenes++,numScenes===appData.scenes.length&&initGame()}function onResize(){canvasW=canvas.width,canvasH=canvas.height;var a=canvas.getBoundingClientRect(),b=document.getElementById("name-input"),c=Math.round(canvas.offsetWidth/2-64),d=Math.round(a.top+canvas.offsetHeight-40);b.style.left=c+"px",b.style.top=d+"px"}function d(a){console.log(a),document.getElementById("debugger").innerHTML=a}function transition(a){isTransition=!0,setSpeed(0);var b,c=2,d=document.createElement("canvas");d.width=canvasW,d.height=canvasH;var e=d.getContext("2d");e.drawImage(canvas,0,0),b=setInterval(function(d){c+=Math.round(c/2);for(var f=1;f<canvasW;f+=c)for(var g=1;g<canvasH;g+=c){var h=e.getImageData(f,g,1,1);context.fillStyle="rgb("+h.data[0]+","+h.data[1]+","+h.data[2]+")",context.fillRect(f,g,f+c-1,g+c-1)}c>=32&&(context.fillStyle="white",isTransition=!0,setSpeed(SPEED),a.disable(),currentScene.enable(),clearInterval(b))},200)}!function(a){function b(){}b.loadImages=function(a,b){for(var c=0,d=[],e=0;e<a.length;e++)d[e]=new Image,d[e].crossOrigin="anonymous",d[e].onload=function(){c++,c===a.length&&b&&b(d)},d[e].src="media/images/"+a[e]+".png"},b.getBalloonImage=function(a,b){var c=Object.keys(a).length,d=0,e=[];for(balloon in a)e[balloon]=new Image,e[balloon].onload=function(){d++,d===c&&b(e)},e[balloon].src="media/images/balloons_"+balloon+".png"},b.getRandomItem=function(a){return a[Math.floor(Math.random()*a.length)]},b.mergeImages=function(a){for(var b=new Image,c=0;c<a.length;c++)vContext.drawImage(a[c],0,0,canvasW,canvasH);return b.src=vCanvas.toDataURL(),b},b.getScores=function(a,b){function d(){b(this.responseText)}var c=new XMLHttpRequest;c.addEventListener("load",d),c.open("GET",a),c.send()},b.setScore=function(a,b){function d(){b(this.responseText)}var c=new XMLHttpRequest;c.addEventListener("load",d),c.open("POST",a),c.send()},a.Utils=b}(window),function(a){function b(){var d,a=this,b=document.getElementById("audio-player"),c=[],e=null,f=!1;this.isEnabled=!0;var g=function(){for(var a=b.getElementsByTagName("source"),d=0;d<a.length;d++)c.push(a[d].src);b.preload="auto"};this.onAudioCanPlayThrough=function(a){e&&e()},this.addListener=function(a){e=a},this.setVolume=function(a){b.volume=a},this.enable=function(){f&&(b.pause(),b.src=d,b.play()),f=!1,a.isEnabled=!0},this.disable=function(){f=!0,b.pause(),a.isEnabled=!1},this.getSourceFromSceneID=function(a){return c[a]},this.playClip=function(a){return d=c[a],f?void(e&&e()):(b.paused||b.src===d||b.pause(),void(b.src!==d?(b.src=d,b.play()):e&&e()))},g()}a.AudioSource=b}(window),function(a){function b(){var b,c,f,a=this,d=document.getElementById("keys-container"),e=document.getElementById("perm-key-container");this.isVisible=!1;var g,h=function(a,b){b.innerHTML="";for(var c,d,e=0;e<a.length;e++)c=document.createElement("div"),c.className="keyboard-key",c.dataset.action=a[e].action,d=document.createElement("label"),d.innerHTML=a[e].label,c.appendChild(d),b.appendChild(c);f=b.getElementsByClassName("keyboard-key");for(var e=0;e<f.length;e++)f[e].addEventListener("click",i)},i=function(a){b?b(a.target.dataset.action):c(a.target.dataset.action)};this.disablePermKey=function(){e.className="disabled"},this.enablePermKey=function(){e.className=""},this.showPerm=function(a,b){c=b,h(a,e),document.getElementById("keyboard-container").className="slide-in"},this.hidePerm=function(){e.innerHTML="",c=null},this.show=function(c,e){b=e,h(c,d),document.getElementById("keyboard-container").className="slide-in",a.isVisible=!0},this.showTimedout=function(c,e,f){b=f,h(c,d);var i=document.getElementById("keyboard-container");i.className="slide-in",a.isVisible=!0;var j=e,k=i.getElementsByClassName("keyboard-key")[0].getElementsByTagName("label")[0],l=k.innerHTML;k.innerHTML=l+" "+j.toString(),g=setInterval(function(){return j--,j===-1?(clearInterval(g),g=null,void b("fail")):void(k.innerHTML=l+" "+j.toString())},200*e)},this.hide=function(){if(a.isVisible){b=null,document.getElementById("keyboard-container").className="";for(var c=0;c<f.length;c++)f[c].removeEventListener("click",i);d.innerHTML="",f=null,a.isVisible=!1,g&&(clearInterval(g),g=null)}}}a.Keyboard=b}(window),function(a){function b(){var g,c=document.getElementById("side-menu-container"),d=c.getElementsByClassName("side-menu-item"),e=document.getElementById("menu-button"),f=!1,h=!1,i=function(){e.addEventListener("click",j);for(var a=0;a<d.length;a++)d[a].addEventListener("click",k);for(var b=document.getElementById("speed-container").getElementsByClassName("side-menu-item"),a=0;a<b.length;a++)if(b[a].innerHTML.search("[X]")!==-1)return void(g=b[a])},j=function(){f=!f,f?(setSpeed(0),c.className="slide-in"):(setSpeed(NORMAL_SPEED),c.className=""),audioSource.isEnabled&&(f?audioSource.setVolume(.2):audioSource.setVolume(1))},k=function(b){switch(b.target.dataset.action){case"mute":audioSource.isEnabled?(audioSource.disable(),b.target.innerHTML=b.target.innerHTML.replace("[X]","[ ]")):(audioSource.enable(),b.target.innerHTML=b.target.innerHTML.replace("[ ]","[X]"));break;case"exit":changeScenes(mainScene.name);break;case"about":a.open(root+"about.html","_blank");break;case"slow":case"normal":case"turbo":g.innerHTML=g.innerHTML.replace("[X]","[ ]"),g=b.target,g.innerHTML=g.innerHTML.replace("[ ]","[X]"),NORMAL_SPEED=parseFloat(g.dataset.value),SPEED=NORMAL_SPEED,balloon.setSpeed(b.target.dataset.action)}e.click()};this.enable=function(){h||(e.style.display="block",h=!0)},this.disable=function(){h&&(e.style.display="none",h=!1)},i()}a.SideMenu=b}(window),function(a){function c(a){var f,g,c=2e3,d=this,e=a;this.isShowing=!1;var h=!1;this.doneDialog=!1,this.currentFrame,this.justShowBalloon=function(a,b){d.currentFrame=f[a],d.isShowing=!0,g&&(clearTimeout(g),g=null),g=setTimeout(function(){b&&b(),d.justHideBalloon()},c)},this.clearBalloon=function(){d.currentFrame=f.empty},this.setSpeed=function(a){var b=2e3;switch(a){case"slow":b=2e3;break;case"normal":b=1700;break;case"turbo":b=1e3}c=b},this.showBalloon=function(a,b,e){d.currentFrame=f[a],setSpeed(0),d.isShowing=!0,g&&(clearTimeout(g),g=null),b?g=setTimeout(function(){d.hideBalloon(),b()},c):e||(g=setTimeout(d.hideBalloon,c)),d.isDialog=!1},this.showDialog=function(a){if(!h){h=!0,d.isShowing=!0;var b=this;b.i=0;var e=function(){d.currentFrame=f[a[b.i]],g&&(clearTimeout(g),g=null),setTimeout(function(){b.i<a.length?e():(h=!1,d.doneDialog=!0)},c),b.i++};e()}},this.justHideBalloon=function(){d.isShowing=!1,d.currentFrame=f.empty},this.hideBalloon=function(){d.isShowing&&(d.isShowing=!1,h=!1,setSpeed(NORMAL_SPEED),d.currentFrame=f.empty)},this.pause=function(){clearTimeout(g),g=null},this.getData=function(a){var c=[];for(b in f)b.toString().includes(a)&&c.push(b);return c},this.resume=function(){d.isShowing&&(g=setTimeout(d.hideBalloon,c))};var i=function(a){f=a,d.currentFrame=f.empty};Utils.getBalloonImage(e,i)}a.Balloon=c}(window),function(a){function b(){var a=this;this.isEnabled=!1;var d,b=new Image,c=appData.hud.states;this.getRender=function(){if(a.isEnabled)return render(),b.src=hudCanvas.toDataURL(),b},this.render=function(){if(a.isEnabled){var b=hero.wallet.points.toString();if(b.length<6){var e="";for(g=0;g<6-b.length;g++)e+="0";b=e+b}var f=hero.wallet.cash.toString();if(f.length<6){for(var e="",g=0;g<6-f.length;g++)e+="0";f=e+f}context.font="20px Mono",context.fillText("SCORE="+b,0,canvasH-20);var h=context.measureText("DINHEIRO="+f+"$");if(context.fillText("DINHEIRO="+f+"$",canvasW-h.width,canvasH-20),context.fillText("DROGAS="+hero.wallet.drugs,0,canvasH-5),currentScene.name===brothelScene.name||currentScene.name===paradiseCafeScene.name){var i=currentScene.bill.toString();if(i.length<6){for(var e="",g=0;g<6-i.length;g++)e+="0";i=e+i}context.font="24px Mono",h=context.measureText("DESPESA="+i+"$"),context.fillText("DESPESA="+i+"$",canvasW-h.width,canvasH-40)}hero.wallet.isStolen?context.drawImage(d[c.wallet_off],0,0,canvasW,canvasH):context.drawImage(d[c.wallet_on],0,0,canvasW,canvasH),hero.wallet.hasGun?context.drawImage(d[c.gun_on],0,0,canvasW,canvasH):context.drawImage(d[c.gun_off],0,0,canvasW,canvasH)}},this.enable=function(){a.isEnabled=!0},this.disable=function(){a.isEnabled=!1};var e=function(b){d=b,a.enable()};Utils.loadImages(appData.hud.images,e)}a.HUD=b}(window),function(a){function b(a){var h,j,b=this,c=a,d=c.images,e=c.animations,f=0,g=0,k=document.createElement("canvas");k.width=canvasW,k.height=canvasH;var o,p,l=k.getContext("2d"),m=new Image,n=0;this.isEnabled=!1,this.name=c.name,this.currentFrame,this.isOpen=!1,this.scrollLocked=!0,this.isCafeDone=!1,this.scroll=function(){if(b.isEnabled){if(j=canvasW-15*g,r(d[e.scroll[0]]),b.currentFrame=m,j<=80&&"street_action"!==p)return j=80,void o(p);j<=-h&&q(),g++}},this.showParadiseCafe=function(){n>=e.show_cafe.length&&(n=0),r(d[e.show_cafe[n]]),b.currentFrame=m,n++},this.open=function(){return f>=e.open.length?(b.isOpen=!0,void(f=0)):(r(d[e.open[f]]),b.currentFrame=m,void f++)},this.idle=function(){r(d[e.open[e.open.length-1]]),b.currentFrame=m},this.close=function(){return f>=e.close.length?(b.isOpen=!1,void(f=0)):(r(d[e.close[f]]),b.currentFrame=m,void f++)},this.enable=function(){b.isEnabled=!0,q()},this.disable=function(){b.isEnabled=!1,f=0,g=0},this.setAction=function(a){p=a};var q=function(){g=0;var a=Math.floor(Math.random()*c.actions.length);p=DEBUG?"whore_action":c.actions[a],door.isOpen=!1},r=function(a){l.drawImage(a,j,0,h,canvasH),m.src=k.toDataURL(),l.clearRect(0,0,canvasW,canvasH)},s=function(a){d=a,h=d[0].width,sceneReady()};this.addEventListener=function(a){o=a},this.removeEventListener=function(){o=null},Utils.loadImages(c.images,s)}a.Door=b}(window),function(a){function b(a){var e,b=3e4,c=this,d=a,f=d.animations,g=0,h=Math.round(NORMAL_SPEED/3*1.5);this.SEX_TICK=0,this.isEnabled=!1,this.name=d.name,this.currentFrame,this.wallet={isStolen:!1,hasGun:!1,cash:b,points:0,drugs:0},this.hasShownDocs=!1,this.hasEnteredBrothel=!1,this.hasRaped=!1,this.hasRobbed=!1,this.hasFucked=!1,this.isFucking=!1,this.isDefending=!1,this.hasDrink=!1,this.update=function(){!c.isEnabled},this.drink=function(){return g>=f.drink.length?(c.hasDrink=!1,void(g=0)):(c.currentFrame=e[f.drink[g]],void g++)},this.rapeOldLady=function(){return c.SEX_TICK===h?void(c.hasRaped=!0):(c.SEX_TICK<=f.undress.length-1?c.currentFrame=e[f.undress[c.SEX_TICK]]:c.SEX_TICK>=h-(f.dress.length-1)?(c.SEX_TICK===h-(f.dress.length-1)&&(g=0),c.currentFrame=e[f.dress[g]],g++):(g>=f.rape.length&&(g=0),c.currentFrame=e[f.rape[g]],g++),void c.SEX_TICK++)},this.bend=function(){c.currentFrame=e[f.bend[0]]},this.oral=function(){g>=f.oral.length&&(g=0),c.currentFrame=e[f.oral[g]],g++,c.SEX_TICK++},this.anal=function(){g>=f.anal.length&&(g=0),c.currentFrame=e[f.anal[g]],g++},this.sex=function(){g>=f.sex.length&&(g=0),c.currentFrame=e[f.sex[g]],g++,c.SEX_TICK++},this.walk=function(){c.isEnabled&&(g>=f.walk.length&&(g=0),c.currentFrame=e[f.walk[g]],g++)},this.robScout=function(){return g>=f.rob_scout.length?(c.hasRobbed=!0,void(g=0)):(c.currentFrame=e[f.rob_scout[g]],void g++)},this.idleStreet=function(a){"left"===a?c.currentFrame=e[f.street_idle_left[0]]:"right"===a?c.currentFrame=e[f.street_idle_right[0]]:c.currentFrame=e[f.street_idle_front[0]]},this.idleGun=function(){c.currentFrame=e[f.gun_idle[0]]},this.idleCafe=function(){c.currentFrame=e[f.cafe_idle[0]]},this.showDocs=function(){c.currentFrame=e[f.show_docs[0]]},this.enterBrothel=function(){return g>=f.enter_building.length?(c.hasEnteredBrothel=!0,void(g=0)):(c.currentFrame=e[f.enter_building[g]],void g++)},this.idleBrothel=function(){c.currentFrame=e[f.brothel_idle[0]]},this.enable=function(){c.isEnabled=!0},this.disable=function(){c.isEnabled=!1,g=0},this.resetTick=function(){g=0},this.reset=function(){c.disable(),c.wallet.isStolen=!1,c.wallet.hasGun=!1,c.wallet.cash=b,c.wallet.points=0,c.wallet.drugs=0,c.hasShownDocs=!1,c.hasEnteredBrothel=!1,c.hasRaped=!1,c.hasRobbed=!1,c.isFucking=!1,c.hasFucked=!1,c.isDefending=!1,c.hasDrink=!1};var i=function(a){e=a,sceneReady()};Utils.loadImages(d.images,i)}a.Hero=b}(window),function(a){function b(a){var d,b=this,c=a,e=c.animations,f=0;this.isEnabled=!1,this.name=c.name,this.currentFrame,this.isShown=!1,this.isAgressive=!1,this.hasAsked=!1,this.isDone=!1,this.update=function(){!b.isEnabled},this.show=function(){return f>=e.show.length?(f=0,b.isShown=!0,void(b.isAgressive=Math.random()<.5)):(b.currentFrame=d[e.show[f]],void f++)},this.idle=function(){b.currentFrame=d[e.show[0]]},this.action=function(){b.currentFrame=d[e.action[0]]},this.hide=function(){return f>=e.hide.length?(f=0,void(b.isShown=!1)):(b.currentFrame=d[e.hide[f]],void f++)},this.enable=function(){b.isEnabled=!0,b.currentFrame=d[e.show[0]]},this.disable=function(){b.isEnabled=!1,f=0,b.isShown=!1,b.hasAsked=!1,b.isDone=!1},this.reset=function(){b.disable(),b.enable()};var g=function(a){d=a};Utils.loadImages(c.images,g)}a.Police=b}(window),function(a){function b(a){var d,b=this,c=a,e=c.animations,f=0;this.isEnabled=!1,this.name=c.name,this.currentFrame,this.isDone=!1,this.isShown=!1,this.hasAsked=!1,this.action="",this.power,this.cost,this.update=function(){!b.isEnabled},this.show=function(){return f>=e.show.length?(f=0,void(b.isShown=!0)):(b.currentFrame=d[e.show[f]],void f++)},this.idle=function(){b.currentFrame=d[e.idle_street[0]]},this.idleBrothel=function(){b.currentFrame=d[e.idle_brothel[0]]},this.hide=function(){return f>=e.hide.length?(f=0,void(b.isShown=!1)):(b.currentFrame=d[e.hide[f]],void f++)},this.oral=function(){f>=e.oral.length&&(f=0),b.currentFrame=d[e.oral[f]],f++},this.sex=function(){f>=e.sex.length&&(f=0),b.currentFrame=d[e.sex[f]],f++},this.anal=function(){f>=e.anal.length&&(f=0),b.currentFrame=d[e.anal[f]],f++},this.enable=function(){b.isEnabled=!0,b.currentFrame=d[e.show[0]],b.cost=Math.round(Utils.getRandomItem([500,1e3,2e3,3e3])),b.power=Math.round(b.cost/15)},this.reset=function(){b.disable(),b.enable()},this.disable=function(){b.isEnabled=!1,b.isDone=!1,b.isShown=!1,b.hasAsked=!1,b.cost=0,b.action="",b.currentFrame=d[e.show[0]],f=0};var g=function(a){d=a,b.currentFrame=d[e.show[0]]};Utils.loadImages(c.images,g)}a.Whore=b}(window),function(a){function b(a){var d,b=this,c=a,e=c.animations,f=0;this.isEnabled=!1,this.name=c.name,this.currentFrame,this.isDone=!1,this.isShown=!1,this.isBended=!1,this.action="",this.update=function(){!b.isEnabled},this.show=function(){return f>=e.show.length?(f=0,void(b.isShown=!0)):(b.currentFrame=d[e.show[f]],void f++)},this.idle=function(){b.currentFrame=d[e.show[0]]},this.bend=function(){return f>=e.bend.length?(f=0,void(b.isBended=!0)):(b.currentFrame=d[e.bend[f]],void f++)},this.unbend=function(){return f>=e.unbend.length?(f=0,void(b.isBended=!1)):(b.currentFrame=d[e.unbend[f]],void f++)},this.hide=function(){return f>=e.hide.length?(f=0,void(b.isShown=!1)):(b.currentFrame=d[e.hide[f]],void f++)},this.enable=function(){b.isEnabled=!0,b.currentFrame=d[e.show[0]]},this.reset=function(){b.disable(),b.enable()},this.disable=function(){b.isEnabled=!1,b.isDone=!1,b.isShown=!1,b.isBended=!1,b.action="",f=0},this.rob=function(){var a=Utils.getRandomItem([100,500]),b="oldlady_only_got_"+a;return{message:b,value:a}};var g=function(a){d=a,b.currentFrame=d[e.show[0]]};Utils.loadImages(c.images,g)}a.OldLady=b}(window),function(a){function b(a){var d,b=this,c=a,e=c.animations,f=0;this.isEnabled=!1,this.name=c.name,this.currentFrame,this.isDone=!1,this.isShown=!1,this.isBended=!1,this.hasPulledCigar=!1,this.action="",this.isAggressive,this.isHurt=!1,this.scoreValue,this.update=function(){!b.isEnabled},this.show=function(){return f>=e.show.length?(f=0,b.isShown=!0,b.scoreValue=Utils.getRandomItem([100,200,300]),void(b.isAgressive=Math.random()<.5)):(b.currentFrame=d[e.show[f]],void f++)},this.idle=function(){b.currentFrame=d[e.show[e.show.length-1]]},this.showGun=function(){b.currentFrame=d[e.gun[0]]},this.pullCigar=function(){return f>=e.pull_cigar.length?(f=0,void(b.hasPulledCigar=!0)):(b.currentFrame=d[e.pull_cigar[f]],void f++)},this.unpullCigar=function(){return f>=e.unpull_cigar.length?(f=0,void(b.hasPulledCigar=!1)):(b.currentFrame=d[e.unpull_cigar[f]],void f++)},this.hide=function(){return f>=e.hide.length?(f=0,void(b.isShown=!1)):(b.currentFrame=d[e.hide[f]],void f++)},this.hurt=function(){return f>=e.hurt.length?(f=0,void(b.isHurt=!0)):(b.currentFrame=d[e.hurt[f]],void f++)},this.enable=function(){b.isEnabled=!0,b.currentFrame=d[e.show[0]]},this.reset=function(){b.disable(),b.enable()},this.disable=function(){b.isEnabled=!1,b.isDone=!1,b.isShown=!1,b.hasPulledCigar=!1,b.action="",b.isHurt=!1,f=0};var g=function(a){d=a,b.currentFrame=d[e.show[0]]};Utils.loadImages(c.images,g)}a.Thief=b}(window),function(a){function b(a){var d,b=this,c=a,e=c.animations,f=0;this.isEnabled=!1,this.name=c.name,this.currentFrame,this.isDone=!1,this.isShown=!1,this.hasStarted=!1,this.isAction=!1,this.isRaping=!1,this.update=function(){!b.isEnabled},this.show=function(){return f>=e.show.length?(f=0,void(b.isShown=!0)):(b.currentFrame=d[e.show[f]],void f++)},this.idle=function(){b.currentFrame=d[e.idle[0]]},this.rape=function(){f>=e.rape.length&&(f=0),b.currentFrame=d[e.rape[f]],f++},this.enable=function(){b.isEnabled=!0,b.currentFrame=d[e.show[0]]},this.reset=function(){b.disable(),b.enable()},this.disable=function(){b.isEnabled=!1,b.isDone=!1,b.isShown=!1,b.hasStarted=!1,b.isAction=!1,b.isRaping=!1,f=0};var g=function(a){d=a,b.currentFrame=d[e.show[0]]};Utils.loadImages(c.images,g)}a.Pimp=b}(window),function(a){function b(a){var d,b=this,c=a,e=c.animations,f=0;this.isEnabled=!1,this.name=c.name,this.currentFrame,this.isDone=!1,this.isShown=!1,this.hasStarted=!1,this.isAction=!1,this.hasServed=!1,this.cost,this.update=function(){!b.isEnabled},this.show=function(){return f>=e.show.length?(f=0,void(b.isShown=!0)):(b.currentFrame=d[e.show[f]],void f++)},this.hide=function(){return f>=e.hide.length?(f=0,b.isShown=!1,void(b.isDone=!0)):(b.currentFrame=d[e.hide[f]],void f++)},this.serve=function(){return f>=e.serve.length?(f=0,void(b.hasServed=!0)):(b.currentFrame=d[e.serve[f]],void f++)},this.idle=function(){b.currentFrame=d[e.idle[0]]},this.enable=function(){b.isEnabled=!0,b.currentFrame=d[e.show[0]]},this.reset=function(){b.disable(),b.isDone=!1,b.cost=Utils.getRandomItem([100,200,450]),b.enable()},this.disable=function(){b.isEnabled=!1,b.isDone=!1,b.isShown=!1,b.hasStarted=!1,b.hasServed=!1,f=0};var g=function(a){d=a,b.currentFrame=d[e.show[0]]};Utils.loadImages(c.images,g)}a.Waitress=b}(window),function(a){function b(a){var d,b=this,c=a,e=c.animations,f=0;this.isEnabled=!1,this.name=c.name,this.currentFrame,this.isDone=!1,this.isShown=!1,this.hasStarted=!1,this.isAction=!1,this.madeDeal=!1;var g=[300,500,1e3,5e3];this.deal={type:"sell",value:200,message:[],item:""},this.update=function(){!b.isEnabled},this.show=function(){return f>=e.show.length?(f=0,void(b.isShown=!0)):(b.currentFrame=d[e.show[f]],void f++)},this.hide=function(){return f>=e.hide.length?(f=0,void(b.isShown=!1)):(b.currentFrame=d[e.hide[f]],void f++)},this.idle=function(){b.currentFrame=d[e.idle[0]]},this.enable=function(){b.isEnabled=!0,b.currentFrame=d[e.show[0]]},this.reset=function(){b.disable(),h(),b.isAction=!1,b.madeDeal=!1,b.enable()};var h=function(){if(b.deal.type="",b.deal.value=-1,b.deal.message=[],b.deal.item="",hero.wallet.isStolen)return b.deal.type="sell",b.deal.value=Utils.getRandomItem(g),b.deal.item="wallet",void(b.deal.message=["dealer_got_wallet","dealer_accept_"+b.deal.value]);if(!hero.wallet.hasGun)return b.deal.type="sell",b.deal.value=Utils.getRandomItem(g),b.deal.item="gun",void(b.deal.message=["dealer_got_gun","dealer_accept_"+b.deal.value]);var a=!0;parseInt(hero.wallet.drugs)>0&&(a=Math.random()<.5),a?(b.deal.type="sell",b.deal.value=Utils.getRandomItem(g),b.deal.item="drug",b.deal.message=["dealer_got_"+Utils.getRandomItem(c.drugs_avail),"dealer_accept_"+b.deal.value]):(b.deal.type="buy",b.deal.value=Utils.getRandomItem(g),b.deal.item="",b.deal.message=["dealer_know_you_got_drugs","dealer_offer_"+b.deal.value])};this.disable=function(){b.isEnabled=!1,b.isDone=!1,b.isShown=!1,b.hasStarted=!1,b.isAction=!1,f=0};var i=function(a){d=a,b.currentFrame=d[e.show[0]]};Utils.loadImages(c.images,i)}a.Dealer=b}(window),function(a){function b(a){var d,b=this,c=a,e=c.animations,f=0;this.isEnabled=!1,this.name=c.name,this.currentFrame,this.isDone=!1,this.isShown=!1,this.hasSalute=!1,this.hasStarted=!1,this.isAction=!1,this.isRobbed=!1;var g=[100,500,1e4,-1,100,500,-1,100,500,-1,100,500,-1,100,500,-1];this.pack={value:-1,message:""},this.update=function(){!b.isEnabled},this.show=function(){return f>=e.show.length?(f=0,void(b.isShown=!0)):(b.currentFrame=d[e.show[f]],void f++)},this.salute=function(){return f>=e.salute.length?(f=0,void(b.hasSalute=!0)):(b.currentFrame=d[e.salute[f]],void f++)},this.hideRobbed=function(){return f>=e.hide_robbed.length?(f=0,void(b.isShown=!1)):(b.currentFrame=d[e.hide_robbed[f]],void f++)},this.hide=function(){return f>=e.hide.length?(f=0,void(b.isShown=!1)):(b.currentFrame=d[e.hide[f]],void f++)},this.idleRobbed=function(){b.currentFrame=d[e.idle[0]]},this.enable=function(){b.isEnabled=!0,b.currentFrame=d[e.show[0]]},this.reset=function(){b.disable(),b.isAction=!1;var c,a=Utils.getRandomItem(g);c=a===-1?"cookies":a.toString(),b.pack={value:a,message:"scout_only_got_"+c},b.enable()},this.disable=function(){b.isEnabled=!1,b.isDone=!1,b.isShown=!1,b.hasStarted=!1,b.isAction=!1,b.hasSalute=!1,b.isRobbed=!1,f=0};var h=function(a){d=a,b.currentFrame=d[e.show[0]],b.reset()};Utils.loadImages(c.images,h)}a.Scout=b}(window),function(a){function b(b){var k,l,o,p,r,c=500,d=10,e=0,f=this,g=b,h=g.images,i=g.animations.background,j=0,m=document.getElementById("main-container").offsetWidth,n=document.getElementById("main-container").offsetHeight,q=0,s=0;this.isEnabled=!1,this.isReady=!1,this.id=g.id,this.name=g.name,this.currentFrame,this.showHUD=!1,this.update=function(){if(f.isEnabled)return j>=i.length&&(j=0),context.drawImage(h[i[j]],0,0,canvasW,canvasH),e++,e>=d?void changeScenes(mainScene.name):void j++};var t=function(b){f.isEnabled&&(p||(p=b),o=b-p,l.fillStyle="rgb(100, 0, 0)",l.fillRect(0,0,m,n),o<597?u():o>=596&&o<4446?v():o>=4446&&w(),a.requestAnimationFrame(t))},u=function(){var a=0,b=["rgb(0, 255, 255)","rgb(192, 0, 0)"];r=32;for(var c=0;c<n;c++){if(a>=b.length&&(a=0),l.fillStyle=b[a],l.fillRect(0,q,m,r),q>=n+32){q=-64;break}q+=r,a++}s++,64===s&&(s=0),q+=s},v=function(){for(var a=0,b=["rgb(255, 255, 0)","rgb(0, 0, 255)"],c=[8,16,32,32,64],d=0;d<n;d++){if(r=Utils.getRandomItem(c),a>=b.length&&(a=0),l.fillStyle=b[a],l.fillRect(0,q,m,r),q>=n){q=0;break}q+=r,a++}},w=function(){for(var a=["rgb(0, 0, 0)","rgb(0, 0, 192)","rgb(192, 0, 0)","rgb(192, 0, 192)","rgb(0, 0, 255)","rgb(255, 0, 0)","rgb(255, 0, 255)","rgb(0, 192, 0)","rgb(0, 192, 192)","rgb(192, 192, 0)","rgb(192, 192, 192)","rgb(0, 255, 0)","rgb(0, 255, 255)","rgb(255, 255, 0)","rgb(255, 255, 255)"],b=0;b<n;b++){if(r=4,l.fillStyle=Utils.getRandomItem(a),l.fillRect(0,q,m,r),q>=n){q=0;break}q+=r}};this.enable=function(){document.body.style.backgroundColor="#bd0000",audioSource.addListener(function(a){f.isReady=!0,k=document.createElement("canvas"),l=k.getContext("2d"),k.width=m,k.height=n,k.style.position="absolute",k.style.top="0",k.style.background="black",document.getElementById("main-container").appendChild(k),t(),audioSource.addListener(null)}),audioSource.playClip(f.id),setSpeed(c),f.isEnabled=!0},this.disable=function(){if(f.isEnabled=!1,f.isReady=!1,j=0,k){var a=document.getElementById("main-container");a.removeChild(a.childNodes[a.childNodes.length-1]),k=null}o=0};var x=function(a){h=a,sceneReady()};Utils.loadImages(g.images,x)}a.SplashScene=b}(window),function(a){function b(a){var b=this,c=a,d=c.images,e=c.animations.background,f=0;this.isEnabled=!1,this.isReady=!1,this.doTransition=!0,this.id=c.id,this.name=c.name,this.currentFrame,this.showHUD=!1,this.update=function(){b.isEnabled&&(f>=e.length&&(f=0),b.currentFrame=[d[e[f]]],render(b.currentFrame),f++)},this.enable=function(){keyboard.show([appData.keys[0],appData.keys[1]],g),b.isEnabled=!0,hero.reset(),audioSource.addListener(function(a){document.body.style.backgroundColor="black",b.isReady=!0,audioSource.addListener(null)}),audioSource.playClip(b.id),setSpeed(NORMAL_SPEED)},this.disable=function(){b.isEnabled=!1,b.isReady=!1,f=0};var g=function(a){switch(keyboard.hide(),a){case appData.keys[0].action:changeScenes(streetScene.name);break;case appData.keys[1].action:changeScenes(recordsScene.name)}},h=function(a){d=a,sceneReady()};Utils.loadImages(c.images,h)}a.MainScene=b}(window),function(a){function b(a){var b=this,c=a,d=c.images,e=c.animations.background,f=0;this.isEnabled=!1,this.isReady=!1,this.doTransition=!0,this.id=c.id,this.name=c.name,this.showHUD=!0,this.currentFrame;var g,h=!1;this.update=function(){b.isEnabled&&(g(),render(b.currentFrame))};var i=function(a){switch(h=!1,a){case"street_action":g=k;break;case"police_action":g=p;break;case"whore_action":g=o;break;case"oldlady_action":g=n;break;case"thief_action":g=m;break;case"cafe_action":g=l;break;case"scout_action":g=j}},j=function(){scout.isDone?scout.isShown?scout.isRobbed?scout.hideRobbed():scout.hide():door.isOpen?door.close():(hero.hasRobbed=!1,balloon.doneDialog=!1,scout.reset(),door.isScoutDone=!1,door.setAction("street_action"),i("street_action")):door.isOpen?scout.isShown?scout.hasSalute?scout.isRobbed?hero.hasRobbed?balloon.doneDialog?(balloon.hideBalloon(),scout.isDone=!0,scout.pack.value!==-1&&(hero.wallet.cash+=parseInt(scout.pack.value),hero.wallet.points+=1)):(balloon.showDialog(["hero_whats_in_pack",scout.pack.message]),scout.idleRobbed()):hero.robScout():(hero.idleStreet(),balloon.showBalloon("scout_hi_friend"),keyboard.isVisible||keyboard.show([appData.keys[5],appData.keys[6]],function(a){"key-assault"===a?(balloon.hideBalloon(),scout.isRobbed=!0):scout.isDone=!0,keyboard.hide()})):scout.salute():scout.show():door.open(),b.currentFrame=[d[e[0]],door.currentFrame,scout.currentFrame,hero.currentFrame,balloon.currentFrame]},k=function(){door.scroll(),hero.walk(),b.currentFrame=[d[e[0]],door.currentFrame,hero.currentFrame]},l=function(){door.isCafeDone?door.isOpen?door.close():(door.isCafeDone=!1,door.setAction("street_action"),i("street_action")):(hero.idleStreet("left"),door.isOpen?(door.showParadiseCafe(),keyboard.isVisible||keyboard.show([appData.keys[7],appData.keys[6]],function(a){"key-enter"===a&&changeScenes(paradiseCafeScene.name),door.isCafeDone=!0,keyboard.hide()})):door.open()),b.currentFrame=[d[e[0]],door.currentFrame,hero.currentFrame]},m=function(){if(door.isOpen||thief.isDone)if(thief.isDone)if(thief.isShown)thief.hasPulledCigar?thief.unpullCigar():thief.hide();else if(door.isOpen)balloon.hideBalloon(),door.close();else{if(thief.isAgressive){var a="";hero.wallet.hasGun&&!thief.isHurt?a="hero_dont_have_gun":hero.wallet.hasGun||(a="hero_shit"),""!==a?(hero.idleStreet("right"),balloon.showBalloon(a,function(){hero.wallet.isStolen=!0,hero.wallet.cash=0,hero.wallet.points=Math.round(hero.wallet.points/2),hero.wallet.drugs=0})):hero.idleStreet(),thief.isHurt&&(hero.wallet.points+=thief.scoreValue)}thief.reset(),balloon.doneDialog=!1,hero.isDefending=!1,door.setAction("street_action"),i("street_action")}else thief.isShown?thief.isAgressive?hero.wallet.hasGun?hero.isDefending?(hero.idleGun(),thief.isHurt?(balloon.showBalloon("thief_only_wanted_light"),thief.isDone=!0):thief.hurt()):(thief.showGun(),balloon.showBalloon("thief_give_me_your_wallet",null,!0),keyboard.isVisible||keyboard.showTimedout([appData.keys[8]],3,function(a){balloon.hideBalloon(),"fail"===a?thief.isDone=!0:hero.isDefending=!0,keyboard.hide()})):(thief.showGun(),balloon.showBalloon("thief_give_me_your_wallet"),thief.isDone=!0):thief.hasPulledCigar?balloon.doneDialog?thief.isDone=!0:balloon.showDialog(["thief_got_light","hero_dont_smoke"]):thief.pullCigar():(hero.idleStreet(),thief.show());else hero.idleStreet(),door.open();b.currentFrame=[d[e[0]],door.currentFrame,thief.currentFrame,hero.currentFrame,balloon.currentFrame]},n=function(){if(!h)if(door.isOpen||oldLady.isDone)if(oldLady.isDone)if(hero.idleStreet(),oldLady.isShown)oldLady.hide();else{if(!door.isOpen)return oldLady.reset(),balloon.doneDialog=!1,hero.hasRaped=!1,hero.hasRobbed=!1,hero.SEX_TICK=0,door.setAction("street_action"),void i("street_action");door.close()}else if(oldLady.isShown)if(""===oldLady.action)setSpeed(0),keyboard.show([appData.keys[4],appData.keys[5],appData.keys[6]],function(a){switch(a){case"key-rape":oldLady.action="rape";break;case"key-assault":oldLady.action="assault";break;case"key-continue":oldLady.action="hide"}setSpeed(NORMAL_SPEED),keyboard.hide()});else if("rape"===oldLady.action)hero.wallet.hasGun?balloon.doneDialog?oldLady.isBended||hero.hasRaped?hero.hasRaped?(hero.idleStreet(),oldLady.isBended?oldLady.unbend():(balloon.showBalloon("oldlady_deserves100"),hero.wallet.points+=100,oldLady.isDone=!0)):(hero.rapeOldLady(),hero.SEX_TICK===Math.round(hero.SEX_TICK/2)&&balloon.showDialog(["oldlady_so_big","hero_its_done"])):(balloon.hideBalloon(),hero.idleStreet(),oldLady.bend()):(hero.idleGun(),balloon.showDialog(["hero_turn_around","oldlady_ho_my_god"])):(hero.idleStreet("right"),
balloon.showBalloon("hero_no_gun"),oldLady.isDone=!0);else if("assault"===oldLady.action)if(hero.wallet.hasGun)if(balloon.doneDialog)if(hero.hasRobbed)oldLady.isDone=!0;else{var a=oldLady.rob();balloon.showBalloon(a.message),hero.wallet.cash+=a.value,hero.hasRobbed=!0}else hero.idleGun(),balloon.showDialog(["hero_this_is_a_robbery","oldlady_ho_my_god"]);else hero.idleStreet("right"),balloon.showBalloon("hero_no_gun"),oldLady.isDone=!0;else oldLady.isDone=!0;else hero.idleStreet(),oldLady.show();else hero.idleStreet(),door.open();b.currentFrame=[d[e[0]],door.currentFrame,oldLady.currentFrame,hero.currentFrame,balloon.currentFrame]},o=function(){if(!h)if(door.isOpen||whore.isDone)if(whore.isDone)whore.isShown?whore.hide():"positive_call"!==whore.action||hero.hasEnteredBrothel?door.isOpen?door.close():(hero.hasShownDocs=!1,"positive_call"!==whore.action?(balloon.showBalloon("hero_pussy"),hero.idleStreet("right")):(changeScenes(brothelScene.name),hero.hasEnteredBrothel=!1),whore.reset(),door.setAction("street_action"),i("street_action")):hero.enterBrothel();else if(whore.isShown)if(whore.hasAsked)whore.isDone||("positive_call"===whore.action?(balloon.showBalloon("whore_come_on_then"),whore.isDone=!0,hero.resetTick()):whore.isDone=!0);else{var a=Utils.getRandomItem(balloon.getData("whore_street_question"));balloon.showBalloon(a,null,!0),whore.hasAsked=!0,keyboard.show([appData.keys[2],appData.keys[3]],function(a){"key-yes"===a&&(whore.action="positive_call"),balloon.hideBalloon(),keyboard.hide()})}else hero.idleStreet("left"),whore.show();else door.open();b.currentFrame=[d[e[0]],door.currentFrame,whore.currentFrame,hero.currentFrame,balloon.currentFrame]},p=function(){h||(hero.idleStreet(),door.isOpen||police.isDone?police.isDone?police.isShown?police.hide():door.isOpen?door.close():(police.reset(),hero.hasShownDocs=!1,door.setAction("street_action"),i("street_action")):police.isShown?police.isAgressive?(police.action(),police.hasAsked?hero.wallet.isStolen?hero.hasShownDocs?balloon.showBalloon("police_come_with_me",function(){changeScenes("jail_scene")}):(balloon.showBalloon("hero_no_wallet"),hero.hasShownDocs=!0):hero.hasShownDocs?police.isDone||(balloon.showBalloon("police_ok_you_can_go"),police.isDone=!0):(hero.showDocs(),hero.hasShownDocs=!0,wait(1)):(balloon.showBalloon("police_ask_docs"),police.hasAsked=!0)):police.hasAsked?hero.hasShownDocs?police.isDone=!0:(balloon.showBalloon("hero_everything_fine"),hero.hasShownDocs=!0):(balloon.showBalloon("police_how_its_going"),police.hasAsked=!0):police.show():door.open()),b.currentFrame=[d[e[0]],door.currentFrame,police.currentFrame,hero.currentFrame,balloon.currentFrame]};this.enable=function(){document.body.style.backgroundColor="#0000C0",b.isEnabled=!0,door.enable(),door.addEventListener(i),hero.enable(),whore.enable(),police.enable(),audioSource.addListener(function(a){b.isReady=!0,audioSource.addListener(null)}),audioSource.playClip(b.id),setSpeed(NORMAL_SPEED),i("street_action")},this.disable=function(){b.isEnabled=!1,b.isReady=!1,h=!1,f=0,door.disable(),door.removeEventListener(),hero.disable(),whore.disable(),police.disable()};var q=function(a){d=a,sceneReady()};Utils.loadImages(c.images,q)}a.StreetScene=b}(window),function(a){function b(a){var b=this,c=a,d=c.images,e=c.animations.background,f=0;this.isEnabled=!1,this.isReady=!1,this.doTransition=!0,this.id=c.id,this.name=c.name,this.currentFrame,this.update=function(){b.isEnabled&&(f>=e.length&&(f=0),b.currentFrame=[d[e[f]]],render(b.currentFrame),f++)},this.enable=function(){document.body.style.backgroundColor="black",b.isEnabled=!0,audioSource.addListener(function(a){b.isReady=!0,audioSource.addListener(null)}),audioSource.playClip(b.id),setSpeed(NORMAL_SPEED),hero.wallet.points>0&&hero.wallet.points>=recordsScene.lowestScore?keyboard.show([appData.keys[9],appData.keys[10]],function(a){keyboard.hide(),changeScenes("key-restart"===a?mainScene.name:recordsScene.name)}):keyboard.show([appData.keys[9]],function(a){keyboard.hide(),changeScenes(mainScene.name)})},this.disable=function(){b.isEnabled=!1,b.isReady=!1,f=0};var g=function(a){d=a,sceneReady()};Utils.loadImages(c.images,g)}a.JailScene=b}(window),function(a){function b(a){var b=this,c=a,d=c.images,e=c.animations,f=0,g=Math.round(NORMAL_SPEED/3*1.5),h=0;this.isEnabled=!1,this.isReady=!1,this.doTransition=!0,this.id=c.id,this.name=c.name,this.currentFrame,this.bill=0,this.showHUD=!0;var i;this.update=function(){b.isEnabled&&(i(),b.currentFrame=[d[e.background[0]],whore.currentFrame,hero.currentFrame,pimp.currentFrame,balloon.currentFrame],render(b.currentFrame))};var j=function(a){switch(actionDone=!1,h=0,a){case"idle_action":i=o;break;case"sex_action":i=l;break;case"anal_action":i=k;break;case"oral_action":i=m;break;case"pimp_action":i=n}},k=function(){if(hero.isFucking){whore.anal(),hero.anal();var a=Math.round(g/3);h===Math.round(a)?balloon.isShowing||balloon.justShowBalloon("whore_so_thick",function(){h++}):h===g-a?balloon.isShowing||balloon.justShowBalloon("hero_aaa",function(){h++}):balloon.isShowing||h++,h===g&&(hero.hasFucked=!0)}else balloon.showBalloon("hero_eat_your_ass"),hero.isFucking=!0;hero.hasFucked&&j("idle_action")},l=function(){if(hero.isFucking){whore.sex(),hero.sex();var a=Math.round(g/3);h===g-a?balloon.isShowing||balloon.justShowBalloon("hero_im_coming",function(){h++}):balloon.isShowing||h++,h===g&&(hero.hasFucked=!0)}else balloon.showBalloon("hero_eat_your_pussy"),hero.isFucking=!0;hero.hasFucked&&j("idle_action")},m=function(){if(hero.isFucking){whore.oral(),hero.oral();var a=Math.round(g/3);h===Math.round(a)?balloon.isShowing||balloon.justShowBalloon("hero_suck_it_all",function(){h++}):h===g-a?balloon.isShowing||balloon.justShowBalloon("hero_so_good",function(){h++}):balloon.isShowing||h++,h===g&&(hero.hasFucked=!0)}else balloon.showBalloon("hero_do_me_blowjob"),hero.isFucking=!0;hero.hasFucked&&j("idle_action")},n=function(){whore.idleBrothel(),hero.idleBrothel(),whore.hasAsked?pimp.isAction?pimp.isRaping?(h++,h===g-Math.round(g/4)&&balloon.justShowBalloon("hero_what_a_dick"),h===g&&(pimp.reset(),hero.wallet.points=0,hero.wallet.cash=0,changeScenes(streetScene.name)),whore.idleBrothel(),hero.bend(),pimp.rape()):balloon.doneDialog?(pimp.isRaping=!0,balloon.hideBalloon()):(pimp.idle(),balloon.showDialog(["pimp_whats_going_on","whore_this_no_pay","pimp_he_will_see"])):pimp.hasStarted?pimp.isShown?(balloon.showBalloon("pimp_hello"),pimp.isAction=!0):pimp.show():(balloon.showBalloon("whore_call_pimp"),pimp.hasStarted=!0):(balloon.showBalloon("hero_no_cash_brothel"),whore.hasAsked=!0)},o=function(){whore.idleBrothel(),hero.idleBrothel(),hero.hasFucked?whore.hasAsked||(balloon.showBalloon("whore_cost_"+whore.cost.toString(),null,!0),whore.hasAsked=!0,b.bill=whore.cost,keyboard.isVisible||keyboard.show([appData.keys[17]],function(a){balloon.hideBalloon(),hero.wallet.cash<b.bill?(whore.hasAsked=!1,j("pimp_action")):(hero.wallet.cash-=b.bill,hero.wallet.points+=whore.power,changeScenes(streetScene.name)),keyboard.hide()})):(balloon.showBalloon("whore_what_you_want",null,!0),keyboard.show([appData.keys[11],appData.keys[12],appData.keys[13]],p))},p=function(a){switch(balloon.hideBalloon(),a){case"key-oral":j("oral_action");break;case"key-sex":j("sex_action");break;case"key-anal":j("anal_action")}keyboard.hide()};this.enable=function(){document.body.style.backgroundColor="#bd00bd",b.isEnabled=!0,hero.enable(),whore.enable(),audioSource.addListener(function(a){b.isReady=!0,audioSource.addListener(null)}),audioSource.playClip(b.id),setSpeed(NORMAL_SPEED),j("idle_action"),b.bill=0},this.disable=function(){b.isEnabled=!1,b.isReady=!1,f=0,b.bill=0,hero.isFucking=!1,hero.hasFucked=!1,hero.SEX_TICK=0,whore.disable()};var q=function(a){d=a,sceneReady()};Utils.loadImages(c.images,q)}a.BrothelScene=b}(window),function(a){function b(a){var b=this,c=a,d=c.images,e=c.animations,f=0,g=!1,h=document.getElementById("virtual-canvas"),j=h.getContext("2d"),k=document.getElementById("name-input");k.addEventListener("input",function(a){n()}),this.isEnabled=!1,this.isReady=!1,this.doTransition=!1,this.id=c.id,this.name=c.name,this.currentFrame,this.highestScore=0,this.lowestScore=0;var m,l=new Image;this.update=function(){b.isEnabled&&(f>=e.background.length&&(f=0),b.currentFrame=[d[e.background[f]],l],render(b.currentFrame),f++)};var n=function(){j.clearRect(0,0,canvasW,canvasH),j.font="28px Mono",j.fillStyle="black",j.fillText("HI-SCORES",80,40),j.font="20px Mono",j.fillText("Nome",55,60),j.fillText("Score",165,60),j.font="24px Mono",j.fillStyle="white";var a=10,b=0;if(m.length>0)for(var c=0;c<m.length;c++)c>0&&(j.fillStyle="black"),j.fillText(m[c].name,55,80+a*c),j.fillText(m[c].score,170,80+a*c),0===c?highestScore=parseInt(m[c].score):c===scores.length-1&&(lowestScore=parseInt(m[c].score)),b++;if(j.fillStyle="black",m.length<6)for(var c=b;c<6;c++)j.fillText("---",55,80+a*c),j.fillText("------",170,80+a*c);if(g){var d=j.measureText("NOVO HI-SCORE!"),e=Math.round(canvas.width/2-d.width/2),f=Math.round(canvasH-40);j.font="24px Mono",j.fillStyle="black",j.fillText("NOVO HI-SCORE!",e,f),d=j.measureText(hero.wallet.points.toString()),e=Math.round(canvas.width/2-d.width/2),f=Math.round(canvasH-27),j.font="28px Mono",j.fillStyle="white",j.fillText(hero.wallet.points.toString(),e,f)}l.src=h.toDataURL()};this.enable=function(){if(document.body.style.backgroundColor="#bdbd00",b.isEnabled=!0,b.isReady=!0,audioSource.playClip(mainScene.id),setSpeed(NORMAL_SPEED),g=!1,0===m.length&&hero.wallet.points>0)g=!0;else for(i=m.length-1;i>-1;i--)if(hero.wallet.points>m[i].score){g=!0;break}g?(k.style.display="block",k.focus(),keyboard.show([appData.keys[9],appData.keys[10]],function(a){if("key-register"===a){if(0===k.value.length)return;o()}else keyboard.hide(),changeScenes(mainScene.name)})):keyboard.show([appData.keys[9]],function(a){keyboard.hide(),changeScenes(mainScene.name)}),n()},this.disable=function(){b.isEnabled=!1,b.isReady=!1,g=!1,k.style.display="none",f=0};var o=function(){Utils.setScore("api.php?insert=set&name="+k.value.toUpperCase()+"&score="+hero.wallet.points,function(a){keyboard.hide(),m=JSON.parse(a),hero.reset(),b.disable(),b.enable()})},p=function(a){d=a,DEBUG?sceneReady():Utils.getScores("api.php?action=scores",function(a){m=JSON.parse(a),sceneReady()})};Utils.loadImages(c.images,p)}a.RecordsScene=b}(window),function(a){function b(a){var g,h,b=this,c=a,d=c.images,e=c.animations,f=0;this.isEnabled=!1,this.isReady=!1,this.doTransition=!0,this.id=c.id,this.name=c.name,this.currentFrame,this.bill=20,this.showHUD=!0;var j,m,i=!1,k=Math.round(NORMAL_SPEED/2*1.5),l=0;this.update=function(){b.isEnabled&&(m(),render(b.currentFrame))};var n=function(a){switch(actionDone=!1,a){case"idle_action":m=s,keyboard.enablePermKey(),waitress.reset();break;case"serve_action":m=r,keyboard.disablePermKey();break;case"drink_action":m=q,keyboard.disablePermKey();break;case"deal_action":m=o,keyboard.disablePermKey(),dealer.reset();break;case"exit_action":m=p,keyboard.disablePermKey()}void 0===hero.currentFrame},o=function(){if(dealer.isDone)dealer.isShown?dealer.hide():(n("idle_action"),balloon.doneDialog=!1);else if(dealer.isShown)if(balloon.doneDialog){var a="sell"===dealer.deal.type,c=!0;if(a&&hero.wallet.cash<parseInt(dealer.deal.value)&&(c=!1,balloon.showBalloon("hero_no_cash_cafe",function(){dealer.isDone=!0})),dealer.isAction)if(keyboard.isVisible&&keyboard.hide(),dealer.madeDeal){if("sell"===dealer.deal.type){switch(dealer.deal.item){case"wallet":hero.wallet.isStolen=!1;break;case"gun":hero.wallet.hasGun=!0;break;case"drug":hero.wallet.drugs+=1}hero.wallet.cash-=parseInt(dealer.deal.value)}else hero.wallet.cash+=parseInt(dealer.deal.value),hero.wallet.drugs-=1;balloon.showBalloon("hero_accept",function(){dealer.isDone=!0})}else balloon.showBalloon("hero_refuse",function(){dealer.isDone=!0});!c||keyboard.isVisible||dealer.isAction||keyboard.show([appData.keys[15],appData.keys[16]],t)}else balloon.showDialog(dealer.deal.message);else dealer.show();b.currentFrame=[g,hero.currentFrame,dealer.currentFrame,balloon.currentFrame]},p=function(){waitress.isDone?(keyboard.hide(),waitress.hasServed=!1,balloon.doneDialog=!1,waitress.reset(),changeScenes(streetScene.name)):waitress.isShown?waitress.hasServed?b.bill>hero.wallet.cash?balloon.doneDialog?(balloon.hideBalloon(),keyboard.hide(),changeScenes(jailScene.name)):balloon.showDialog(["hero_no_cash_cafe","waitress_wait_there"]):(hero.wallet.cash-=b.bill,waitress.isDone=!0):balloon.isShowing||(balloon.showBalloon("waitress_your_bill",null,!0),keyboard.show([appData.keys[17]],function(){keyboard.hide(),balloon.hideBalloon(),waitress.hasServed=!0})):waitress.show(),b.currentFrame=[g,hero.currentFrame,waitress.currentFrame,balloon.currentFrame]},q=function(){hero.hasDrink?hero.drink():(n("idle_action"),hero.hasDrink=!1),b.currentFrame=[g,hero.currentFrame]},r=function(){hero.hasDrink?n("drink_action"):waitress.isDone?(n("idle_action"),hero.hasDrink=!0,b.bill+=waitress.cost):waitress.isShown?waitress.hasServed?waitress.hide():waitress.serve():waitress.show(),b.currentFrame=[g,waitress.currentFrame,hero.currentFrame]},s=function(){l===k?(j=Math.random()<.5,n(j?"deal_action":"serve_action"),l=0):hero.idleCafe(),l++,b.currentFrame=[g,hero.currentFrame]},t=function(a){switch(balloon.isShowing&&balloon.hideBalloon(),a){case"key-exit":n("exit_action"),keyboard.hidePerm();break;case"key-accept":dealer.isAction=!0,dealer.madeDeal=!0;break;case"key-refuse":dealer.isAction=!0,dealer.madeDeal=!1}},u=function(){f>=e.background.length&&(f=0),g=d[e.background[f]],f++};this.enable=function(){document.body.style.backgroundColor="black",b.isEnabled=!0,audioSource.addListener(function(a){b.isReady=!0,audioSource.addListener(null)}),audioSource.playClip(b.id),setSpeed(NORMAL_SPEED),n("idle_action"),h=setInterval(u,50*NORMAL_SPEED),keyboard.showPerm([appData.keys[14]],t),b.bill=20},this.disable=function(){b.isEnabled=!1,b.isReady=!1,f=0,h=clearInterval(h),h=null,i=!1,l=0,hero.hasDrink=!1,keyboard.hidePerm(),b.bill=0};var v=function(a){d=a,g=d[e.background[e.background.length-1]],sceneReady()};Utils.loadImages(c.images,v)}a.ParadiseCafeScene=b}(window);var DEBUG=!1,root="http://brunoperry.net/paradisecafe2/",TRANSTION_TIME=2e3,NORMAL_SPEED=150,SPEED=NORMAL_SPEED,interval,landingPage,door,context,hudContext,canvas,canvasW,canvasH,currentFrame,numScenes=0,splashScene,mainScene,streetScene,brothelScene,paradiseCafeScene,currentScene,hero,police,whore,oldLady,thief,pimp,dealer,waitress,scout,balloon,hud,sideMenu,audioSource,isTransition=!1;window.onresize=function(){onResize()},console.log("%c PARADISE CAFÃ‰ 2 / C.C.2016","background: #222; color: #bada55");